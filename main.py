from telegram import Update, ReplyKeyboardMarkup
from telegram.ext import ApplicationBuilder, CommandHandler, MessageHandler, ContextTypes, filters

TOKEN = "PASTE_YOUR_BOT_TOKEN_HERE"

# –•—Ä–∞–Ω–∏–º –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
user_steps = {}

QUESTIONS = {
    1: {
        "text": """–ó–∞–¥–∞–Ω–∏–µ 1:
–¢—Ä–∏ –¥–µ–≤—É—à–∫–∏ –≤–Ω–∏–∑ –≤–¥–æ–ª—å —Å—Ç–µ–Ω—ã –ª–µ—Ç—è—Ç,
–ù–µ –ø–∞–¥–∞—é—Ç, –Ω–µ—Ç, –∞ –±—É–¥—Ç–æ –ø–∞—Ä—è—Ç.
–ü–æ–¥ –Ω–∏–º–∏ —Ñ–∞–º–∏–ª–∏—é –Ω–∞–π–¥–∏,
–ì–ª–∞—Å–Ω–∞—è –≤ –Ω–µ–π –¥–≤–∞–∂–¥—ã –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è - –µ—ë –∏ –∑–∞–±–µ—Ä–∏.

–í–≤–µ—Å—Ç–∏ –æ—Ç–≤–µ—Ç:""",
        "answer": "i",
        "success": "–í—Å—ë —Ç–∞–∫. –ò–¥–µ–º –¥–∞–ª—å—à–µ!"
    },
    2: {
        "text": """–ó–∞–¥–∞–Ω–∏–µ 2:
–í—ã–π–¥–∏ –Ω–∞ Bree St –∏ –¥–µ—Ä–∂–∏ –∫—É—Ä—Å –Ω–∞ —Å–µ–≤–µ—Ä–æ-–∑–∞–ø–∞–¥.
–ì–æ—Ä–æ–¥ –ø–æ–¥—Å–∫–∞–∂–µ—Ç, –µ—Å–ª–∏ —Å–º–æ—Ç—Ä–µ—Ç—å –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ.
–ù–∞ –±–æ—Ä–¥–æ–≤–æ–º —Ñ–æ–Ω–µ —Å–ø—Ä—è—Ç–∞–ª–æ—Å—å —Ç—Ä—ë—Ö–∑–Ω–∞—á–Ω–æ–µ —á–∏—Å–ª–æ.
–û—Ç–±—Ä–æ—Å—å –ø–µ—Ä–≤—É—é —Ü–∏—Ñ—Ä—É - –æ—Å—Ç–∞–≤—à–µ–µ—Å—è —á–∏—Å–ª–æ –∏ —É–∫–∞–∂–µ—Ç –Ω—É–∂–Ω—É—é –±—É–∫–≤—É.

–í–≤–µ—Å—Ç–∏ –æ—Ç–≤–µ—Ç:""",
        "answer": "v",
        "success": "–û—Ç–ª–∏—á–Ω–æ!"
    },
    3: {
        "text": """–ó–∞–¥–∞–Ω–∏–µ 3:
‚Äì33.92416 18.415093
330¬∞ XXXX ‚Üí X+X+X+X = ?

–í–≤–µ—Å—Ç–∏ –æ—Ç–≤–µ—Ç:""",
        "answer": "t",
        "success": "–¢—ã –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø—É—Ç–∏!"
    },
    4: {
        "text": """–ó–∞–¥–∞–Ω–∏–µ 4:
–ù–∞ –ö–∏—Ç–æ–≤–æ–π —Å –î–ª–∏–Ω–Ω–æ–π –ø—É—Ç–∏ —Å–æ—à–ª–∏—Å—å,
–¢–∞–º –∑–≤–µ—Ä—å –∏–∑ –±–æ–ª—å—à–æ–π –ø—è—Ç—ë—Ä–∫–∏ —Å–º–æ—Ç—Ä–∏—Ç –≤–Ω–∏–∑.
–ü–æ–¥ –µ–≥–æ –≥–æ–ª–æ–≤–æ–π —á–∏—Å–ª–æ —Ç—ã –Ω–∞–π–¥—ë—à—å ‚Äì
–í—ã—á—Ç–∏ –æ–¥–Ω–æ –∏–∑ –¥—Ä—É–≥–æ–≥–æ –∏ –ø–æ–π–º–µ—à—å:
–†–∞–∑–Ω–∏—Ü–∞ —Å—Ç–∞–Ω–µ—Ç —Å–ª–µ–¥—É—é—â–∏–º —á–∏—Å–ª–æ–º,
–ê –±—É–∫–≤–∞ –∞–ª—Ñ–∞–≤–∏—Ç–∞ —Å–ø—Ä—è—Ç–∞–Ω–∞ –≤ –Ω—ë–º.

–í–≤–µ—Å—Ç–∏ –æ—Ç–≤–µ—Ç:""",
        "answer": "e",
        "success": "–¢—ã –º–æ–ª–æ–¥–µ—Ü! –°–ª–µ–¥—É—é—â–µ–µ –∑–∞–¥–∞–Ω–∏–µ."
    },
    5: {
        "text": """–ó–∞–¥–∞–Ω–∏–µ 5:
–Ø —Å—Ç–æ—é –Ω–∞–ø—Ä–æ—Ç–∏–≤ –ª—é–±–æ–≤–Ω–æ–π –ª—é–±–≤–∏. –ü—É—Ç—å –∫–æ –º–Ω–µ –∏–¥—ë—Ç –≤–≤–µ—Ä—Ö.
–°–æ—Å—á–∏—Ç–∞–π, —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ —Ç–µ–±–µ –Ω–∞–¥–æ –ø–æ–¥–Ω—è—Ç—å—Å—è, —á—Ç–æ–±—ã –¥–æ –º–µ–Ω—è –¥–æ–±—Ä–∞—Ç—å—Å—è.
–ß–∏—Å–ª–æ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–ª—É—á–∏—à—å, - –∫–æ–¥ –∫ –Ω—É–∂–Ω–æ–π –±—É–∫–≤–µ.

–í–≤–µ—Å—Ç–∏ –æ—Ç–≤–µ—Ç:""",
        "answer": "l",
        "success": "–ü–æ–≥–Ω–∞–ª–∏ –¥–∞–ª—å—à–µ?"
    },
    6: {
        "text": """–ó–∞–¥–∞–Ω–∏–µ 6:
–Ø —Å—Ç–æ—é –≤ Company‚Äôs Garden c 1872 –≥–æ–¥–∞. –Ø –±–µ–ª–∞—è.
–°–ø—Ä–∞–≤–∞ –Ω–∞ –º–Ω–µ –µ—Å—Ç—å —Ç–∞–±–ª–∏—á–∫–∞.
–ù—É–∂–Ω–∞—è —Ç–µ–±–µ –±—É–∫–≤–∞ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –∑–¥–µ—Å—å 9 —Ä–∞–∑.

–í–≤–µ—Å—Ç–∏ –æ—Ç–≤–µ—Ç:""",
        "answer": "r",
        "success": "–¢—ã –Ω–∞ –≤–µ—Ä–Ω–æ–º –ø—É—Ç–∏!"
    },
    7: {
        "text": """–ó–∞–¥–∞–Ω–∏–µ 7:
–ù–∞–π–¥–µ—à—å –º–µ–Ω—è –Ω–∞ –ø–µ—Ä–≤–æ–º –º–µ—Å—Ç–µ –ø–æ–¥ –û–ö–ù–ê–º–∏.

–í–≤–µ—Å—Ç–∏ –æ—Ç–≤–µ—Ç:""",
        "answer": "g",
        "success": "–ì–æ—Ç–æ–≤ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∑–∞–¥–∞–Ω–∏—é?"
    },
    8: {
        "text": """–ó–∞–¥–∞–Ω–∏–µ 8:
–ú–µ–Ω—è –∑–æ–≤—É—Ç Eucalyptus cladocalyx.
–Ø –∂–∏–≤—É –≤ De Waal Park.
–ù–∞ –º–Ω–µ –µ—Å—Ç—å —Å–ª–µ–¥ –æ—Ç —Å—Ç–æ–ø—ã, –∞ —Ä—è–¥–æ–º - –∫–ª—é—á –∫ –Ω—É–∂–Ω–æ–π –±—É–∫–≤–µ.

–í–≤–µ—Å—Ç–∏ –æ—Ç–≤–µ—Ç:""",
        "answer": "l",
        "success": "–ö—Ä—É—Ç–æ! –ì–æ –¥–∞–ª—å—à–µ)"
    },
    9: {
        "text": """–ó–∞–¥–∞–Ω–∏–µ 9:
–Ø ‚Äì —á–µ—Ç–≤—ë—Ä—Ç–∞—è –±—É–∫–≤–∞.
–ù–∞–π–¥–µ—à—å –º–µ–Ω—è –≤ –º–æ–∑–∞–π–∫–µ –Ω–∞ Kloof St –º–µ–∂–¥—É Hof St –∏ Camp St.

–í–≤–µ—Å—Ç–∏ –æ—Ç–≤–µ—Ç:""",
        "answer": "n",
        "success": "–¢—ã –Ω–∞ —Ñ–∏–Ω–∏—à–Ω–æ–π –ø—Ä—è–º–æ–π!"
    },
    10: {
        "text": """–ó–∞–¥–∞–Ω–∏–µ 10:
–ü–æ–¥ –≥–µ—Ä–± H.S. JvR –≤–∑–≥–ª—è–Ω–∏,
–¢–∞–º –≥–ª–∞—Å–Ω–∞—è —Å–ø—Ä—è—Ç–∞–ª–∞—Å—å –≤–Ω—É—Ç—Ä–∏.
–í—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –∑–¥–µ—Å—å –¥–≤–∞–∂–¥—ã –æ–Ω–∞, –∏ –Ω–µ —Å–ø—Ä–æ—Å—Ç–∞:
–ï—é –∑–∞–≤–µ—Ä—à–∞–µ—Ç –ø–æ–∏—Å–∫ –±—É–∫–≤ –¥–ª—è —Å–ª–æ–≤–∞.

–í–≤–µ—Å—Ç–∏ –æ—Ç–≤–µ—Ç:""",
        "answer": "a",
        "success": """–¢—ã –ø—Ä–æ—à—ë–ª –≤—Å–µ –ª–æ–∫–∞—Ü–∏–∏ –∏ —Å–æ–±—Ä–∞–ª –≤—Å–µ –±—É–∫–≤—ã.
–í–æ–Ω –æ–Ω–∏: I V T E L R G L N A.

–û—Å—Ç–∞–ª—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–≥: –æ—Ç–ø—Ä–∞–≤–ª—è–π—Å—è –≤ –∫–∞—Ñ–µ –∑–∞ –æ—Ä–∞–Ω–∂–µ–≤—ã–º–∏ –¥–≤–µ—Ä—å–º–∏ –∏ —Å–æ—Å—Ç–∞–≤—å —Å–ª–æ–≤–æ.

–í–≤–µ—Å—Ç–∏ –æ—Ç–≤–µ—Ç:"""
    }
}

FINAL_WORD = "travelling"


async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_steps[update.effective_user.id] = 1

    keyboard = ReplyKeyboardMarkup([["–ü–æ–≥–Ω–∞–ª–∏"]], resize_keyboard=True)

    await update.message.reply_text(
        "–ü—Ä–∏–≤–µ—Ç, –¢—ë–º–∞!\n"
        "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –≥–æ—Ä–æ–¥—Å–∫–æ–π –∫–≤–µ—Å—Ç –ø–æ –ö–µ–π–ø—Ç–∞—É–Ω—É!\n"
        "–û–±—Ä–∞—Ç–Ω–æ–π –¥–æ—Ä–æ–≥–∏ –Ω–µ—Ç üòâ\n"
        "–¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äì –ø—Ä–æ–π—Ç–∏ –≤—Å–µ –ª–æ–∫–∞—Ü–∏–∏, —Å–æ–±—Ä–∞—Ç—å –±—É–∫–≤—ã –∏ —Å–æ—Å—Ç–∞–≤–∏—Ç—å —Å–ª–æ–≤–æ.\n"
        "–°–º–æ—Ç—Ä–∏ –ø–æ —Å—Ç–æ—Ä–æ–Ω–∞–º –∏ –Ω–µ —Å–ø–µ—à–∏ ‚Äì –ö–µ–π–ø—Ç–∞—É–Ω –ª—é–±–∏—Ç –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã—Ö.\n\n"
        "–ì–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å?",
        reply_markup=keyboard
    )


async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.effective_user.id
    text = update.message.text.strip().lower()

    if text == "–ø–æ–≥–Ω–∞–ª–∏":
        await update.message.reply_text(QUESTIONS[1]["text"])
        return

    step = user_steps.get(user_id)

    if not step:
        await update.message.reply_text("–ù–∞–ø–∏—à–∏ /start")
        return

    if step <= 10:
        if text == QUESTIONS[step]["answer"]:
            await update.message.reply_text(QUESTIONS[step]["success"])
            user_steps[user_id] += 1
            if step < 10:
                await update.message.reply_text(QUESTIONS[step + 1]["text"])
        else:
            await update.message.reply_text("–ü–æ–¥—É–º–∞–π –µ—â—ë.")
    else:
        if text == FINAL_WORD:
            await update.message.reply_text(
                "–£—Ä–∞! –°–ª–æ–≤–æ —Å–ª–æ–∂–∏–ª–æ—Å—å, –∞ –∑–Ω–∞—á–∏—Ç, –∫–≤–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω.\n"
                "–ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –ù–∞–¥–µ—é—Å—å, —Ç—ã –∫–∞–π—Ñ–∞–Ω—É–ª!\n\n"
                "–ù–æ –µ—Å—Ç—å –µ—â—ë –∫–æ–µ-—á—Ç–æ) –ò –æ–± —ç—Ç–æ–º —Ç–µ–±–µ —Ä–∞—Å—Å–∫–∞–∂–µ—Ç –¥–µ–≤—É—à–∫–∞ –Ω–∞–ø—Ä–æ—Ç–∏–≤)"
            )
        else:
            await update.message.reply_text("–ü–æ–¥—É–º–∞–π –µ—â—ë.")


def main():
    app = ApplicationBuilder().token(TOKEN).build()

    app.add_handler(CommandHandler("start", start))
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))

    app.run_polling()


if __name__ == "__main__":
    main()
